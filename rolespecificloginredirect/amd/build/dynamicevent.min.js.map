{"version":3,"sources":["../src/dynamicevent.js"],"names":["define","dynamicChange","jsCode","document","getElementById","addEventListener","parseInt","value","urltogo","submittingSettings","rooturl","onsubmit","urlinputsvalue","link","substring","xmlhttp","XMLHttpRequest","open","onreadystatechange","status","window","send","opennewwindow","url"],"mappings":"AA2BAA,OAAM,+CAAC,EAAD,CAAK,UAAY,CACnB,MAAwE,CAMpEC,aAAa,CAAE,uBAAUC,CAAV,CAAkB,CAC7B,GAAIA,CAAJ,CAAY,CACR,GAAIC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAJ,CAA2C,CACvCD,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EACGC,gBADH,CACoB,QADpB,CAC8B,UAAY,CACtC,GAAIH,CAAM,CAACI,QAAQ,CAACH,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCG,KAAxC,CAAT,CAAV,CAAoE,CAChEJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCG,KAAtC,CAA8CL,CAAM,CAChDI,QAAQ,CAACH,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCG,KAAxC,CADwC,CAAN,CACcC,OAC/D,CAHD,IAGO,CACHL,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCG,KAAtC,CAA8C,KACjD,CACF,CARH,CASH,CACJ,CACJ,CApBmE,CA0BpEE,kBAAkB,CAAE,4BAAUC,CAAV,CAAmB,CACnC,GAAIP,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAJ,CAA2C,CACvCD,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCO,QAAzC,CAAoD,UAAY,IACxDC,CAAAA,CAAc,CAAGT,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCG,KADC,CAExDM,CAAI,CAAG,EAFiD,CAG5D,GAAsC,MAAlC,EAAAD,CAAc,CAACE,SAAf,CAAyB,CAAzB,CAA4B,CAA5B,CAAJ,CAA8C,CAC1CD,CAAI,CAAGD,CACV,CAFD,IAEO,CACHC,CAAI,CAAGH,CAAO,CAAG,EAAV,CAAeE,CACzB,CACD,GAAIG,CAAAA,CAAO,CAAG,GAAIC,CAAAA,cAAlB,CAEAD,CAAO,CAACE,IAAR,CAAa,MAAb,CAAqBJ,CAArB,KACAE,CAAO,CAACG,kBAAR,CAA6B,UAAY,CACrC,GAAsB,GAAlB,EAAAH,CAAO,CAACI,MAAZ,CAA2B,CACvBC,MAAM,CAACH,IAAP,CACEJ,CADF,CAEE,eAFF,CAGE,uCAHF,CAKH,CACJ,CARD,CASAE,CAAO,CAACM,IAAR,CAAa,IAAb,CACH,CACJ,CACJ,CAnDmE,CAyDpEC,aAAa,CAAE,uBAAUC,CAAV,CAAe,CAC1BH,MAAM,CAACH,IAAP,CAAYM,CAAZ,CACH,CA3DmE,CA6D3E,CA9DK,CAAN","sourcesContent":["// This link$link is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Admin settings and defaults.\n *\n * @package    auth_rolespecificloginredirect\n *\n * @copyright  2020 onwards Igor Nesterow <Igor.Nesterow@b-tu.de>\n * @copyright  2021 onwards Eleonora Kostova <kostoele@b-tu.de>\n * @copyright  based on Email Authentication Plugin by Martin Dougiamas (http://dougiamas.com)\n *\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([], function () {\n    return /** @alias module:auth_rolespecificloginredirect/dynamicevent */ {\n        /**\n         * @param {Array} jsCode Contains all records in the table \"auth_rolespecificredir\".\n         * Implements input's field text output.\n         * @method dynamicChange\n         */\n        dynamicChange: function (jsCode) {\n            if (jsCode) {\n                if (document.getElementById(\"id_s__urls\")) {\n                    document.getElementById(\"id_s__roles\")\n                      .addEventListener(\"change\", function () {\n                        if (jsCode[parseInt(document.getElementById(\"id_s__roles\").value)]) {\n                            document.getElementById(\"id_s__urls\").value = jsCode[\n                                parseInt(document.getElementById(\"id_s__roles\").value)].urltogo;\n                        } else {\n                            document.getElementById(\"id_s__urls\").value = \"/my\";\n                        }\n                      });\n                }\n            }\n        },\n        /**\n         * @param {String} rooturl Contains the root URL.\n         * Checks the correctness of the URL on submit.\n         * @method submittingSettings\n         */\n        submittingSettings: function (rooturl) {\n            if (document.getElementById(\"id_s__urls\")) {\n                document.getElementById(\"adminsettings\").onsubmit = function () {\n                    var urlinputsvalue = document.getElementById(\"id_s__urls\").value;\n                    var link = \"\";\n                    if (urlinputsvalue.substring(0, 4) == \"http\") {\n                        link = urlinputsvalue;\n                    } else {\n                        link = rooturl + \"\" + urlinputsvalue;\n                    }\n                    var xmlhttp = new XMLHttpRequest();\n\n                    xmlhttp.open(\"HEAD\", link, true);\n                    xmlhttp.onreadystatechange = function () {\n                        if (xmlhttp.status != 200) {\n                            window.open(\n                              link,\n                              \"Checking Page\",\n                              \"width=550,height=700,left=150,top=200\"\n                            );\n                        }\n                    };\n                    xmlhttp.send(null);\n                };\n            }\n        },\n        /**\n         * @param {String} url Contains to URL to be opened in Pop-Up window.\n         * Shows Pop-Up Window.\n         * @method opennewwindow\n         */\n        opennewwindow: function (url) {\n            window.open(url);\n        },\n    };\n});\n"],"file":"dynamicevent.min.js"}